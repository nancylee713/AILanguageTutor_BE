language: python
python:
- '3.7'
install:
- pip install -r requirements.txt
services:
- postgresql
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
- export APP_SETTINGS="config.StagingConfig"
script:
- python3 manage.py test
deploy:
  provider: heroku
  api_key:
    secure: TmigMa2OGKyvftBtg9g2OpKdi83Ebg8O0i+v32nktt3/HIBD9d55BxtFYA6S4pRaFk6DtV/iIWtMLPn97DEEneIkYiNeTiDPoeuVnyhXqxJ2I4iin33vg9hDVArQxDY0BK9/vCBNYb3YR7HQjGRdNcx55XGsGlRyBwqSIWZv8W6NnPqozejQJjuSWsM3yb9a9x0WMVluukJEsR2oBWgXKm5LJqN4ofar4T2W5WEyaNZ7smZFOLZCKz9uVgrn7n2S8BMP0lBnPCgQeZK0vDAz08SBcci8550S6Nc+hW8D1DLK0qIpdky/4RAj+xAzNcpjAHTMKjDlZZPgC/F5LxFpLNFctWbeAL/QzAHa0wdKpzntScDaTlpYNMbphWBuxmW8/4VZA9SlnD+XLzj8XYPc/4ixBJLl5jc2Gemxs3mTRd6XMhYbZWlLI1XtdE+emfmY3kGtnStFRTZnEUzwRrSqvJ+PKk3I4QBlLh8tpcPuYTSqhtKlVR/vUxm2nN9ZXGI755GapqAjftTIjdpUlXMwa/juL4q2uMx6AmrQMXrLcjSDKttUb+Mafd7peDgTqfLt8kmVeF9EP3FoTIO7R5tNTi4FOVJegU0TJT0SCP3H98tFIcI8tV/x2LnEd2vIdj3MuVKs6iyUnA8xzc6bGOxo2G/H5G5WNaMdRTrOv/aJmik=
  app: language-learner-be
  on:
    repo: nancylee713/AILanguageTutor_BE
    branch: master

deploy:
  provider: heroku
  api_key:
    secure: xVl1P+bELgetwjo5CCYXwa+xGAcC+HTRAcva//KKlf+CYDsKcTXWXRpRVcqGHkfkpDYuuOXKFoYRn838S7JKSHxBwDRiq6qVr1LSae+i2x+SNugr6v+DpuM7ANTbPJuadBqWjP/oMpKv8amfR3mct6mKtmAjiY2boUJHDFgjyTS+J0SSwBNDrsBVR7ojQqherQf83ldY5UO1qgBEoq45hibzTtcbvtR5P4XST4ecBVXrVJqg2FtYQa8jcgFmbxdoe/U3evKPgZpI4OqLY8FxTLGWkWLq9L0/ybnmvBIMmHB/D0RfHZSAFAtYZFGiuDBkk/UEkj+Tsofugzkendbo6L9MuCTAIUuPs4pIH9CiYw5QvuiLpVKUcyP+Nxf+IewAK1uPzhUbPfnL/MY/vRmMoDz6/t9WX/xJE3zZ2OJdgOz/lnMRBLjnoTGw5ZpU2A6oda1BfNFoY3/bMUsiMV4NYHhmii4qS8DI9I8FQaqxpJI1lbXmyPYErF1tQboOMevbGRStvQ4ssgos6BCiLq2uXsiAFA8IqEpEeRiRqIph9NR1apzIHV9/K00IZNi4CPBZ/fbi9mWK4CNWwxFF2VXHflf2tKhFdOTtt+bbyJeIv1eRVSKhNHm/RELdIpRxvTQwBIoyF+pBaaUwrHRJYQVs316I9q86tr0MUiCZyOji0Mw=
  app: language-learner-be
  on:
    repo: nancylee713/AILanguageTutor_BE
    branch: staging